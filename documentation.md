# Документация по проекту "Журнал тренировок"
*Используется tkinter для графического интерфейса.*

# Документация: Программа "Дневник тренировок"

Данная программа реализует графический интерфейс для ведения дневника тренировок с использованием библиотеки tkinter. 
Приложение позволяет добавлять записи о тренировках (упражнения, вес и количество повторений), сохранять их в файл JSON 
и просматривать добавленные данные. Также поддерживается импорт и экспорт данных в формате CSV.

---

## ▎Файловая структура
- training_log.json — файл, в котором хранятся записи о тренировках в формате JSON.
- main.py - основной модуль программы, в котором реализуется основное окно программы, виджеты, дополнительное окно с 
данными, возвозностью поиско по этим данным, и другие встроенные функции.
- function.py — модуль, содержащий дополнительные функции: обработка фильтрации, экспорт/импорт CSV, редактирование 
записей и т.д.
---
### load_data()
Загружает данные из файла JSON.

Процесс работы:
1. Открывает файл training_log.json.
2. Если файл отсутствует или поврежден (ошибка чтения), возвращает пустой список.
3. Возвращает список записей в формате Python (словарь).

---

### save_data(data)
Сохраняет переданные данные в файл JSON.

Аргументы:
- data — список записей о тренировках.

Процесс работы:
1. Преобразовывает данные в JSON.
2. Сохраняет данные в training_log.json с отступами (indent=4).
![save_json.png](images%2Fsave_json.png)
---

## ▎Класс TrainingLogApp

Класс реализует основной графический интерфейс и функциональность приложения.

### Методы класса

#### __init__(self, root)
Инициализация основного окна приложения.

Аргументы:
- root — объект верхнего уровня (основное окно), передаваемый в класс.

Основные действия:
- Устанавливается заголовок окна.
- Вызывается метод create_widgets() для добавления всех необходимых виджетов.
![window root.png](images%2Fwindow%20root.png)
---

#### create_widgets(self)
Создает виджеты интерфейса, включая кнопки, поля ввода и таблицу.

Основные элементы интерфейса:
1. Поля ввода:
   - Упражнение.
   - Вес (валидируется как положительное число).
   - Количество повторений (также валидируется как положительное число).

2. Кнопки:
   - "Добавить запись" — для добавления новой записи в журнал.
   - "Просмотреть записи" — для отображения сохраненных данных.
   - "Экспорт в CSV" — для сохранения данных в файл CSV.
   - "Импорт в CSV" — для загрузки данных из файла CSV.

---

#### validate_positive_number(self, value)
Проверяет, чтобы введенное значение было положительным числом или пустым (в процессе редактирования).

Аргументы:
- value — вводимое значение.

Описание:
- Возвращает True, если значение пустое или является положительным числом.
- Возвращает False, если значение не соответствует условиям.

---

#### add_entry(self)
Добавляет новую запись в тренировочный журнал.

Процесс добавления записи:
1. Получает текущую дату и время (datetime.now()).
2. Считывает данные из полей ввода (упражнение, вес, количество повторений).
3. Проверяет заполненность всех полей. Если не все поля заполнены, выводит сообщение об ошибке.
4. Создает запись в формате словаря:
      {
      - 'date': date,               # текущая дата и время
      - 'exercise': exercise,       # введенное упражнение
      - 'weight': weight,           # введенный вес
      - 'repetitions': repetitions  # количество повторений
   }
   
5. Загружает текущие данные из файла JSON через load_data().
6. Добавляет новую запись в список данных.
7. Сохраняет обновленные данные в файл JSON с помощью функции save_data().
---

### Метод view_records(self): — просмотр всех записей

Данный метод отвечает за отображение записей в отдельном окне, позволяет выполнять поиск и взаимодействовать с журналом.

Ключевые элементы метода:

#### Окно для отображения записей
records_window = Toplevel(self.root)
records_window.title("Записи тренировок")

- Создается новое окно (Toplevel) для работы с записями.
![jornal_training.png](images%2Fjornal_training.png)
---

#### Поиск по дате
- Компоненты интерфейса для поиска записей по дате:
date_label = ttk.Label(records_window, text="Поиск по дате:")
self.date_entry = DateEntry(records_window, width=10, date_pattern='yyyy-mm-dd')
date_search_btn = ttk.Button(records_window, text='Поиск по дате',
                             command=lambda: date_search(self.tree, self.date_entry.get(), load_data()))
![date_search.png](images%2Fdate_search.png)
- Поиск по дате: используется виджет DateEntry для выбора даты. Кнопка запускает функцию date_search.
![date_search_calend.png](images%2Fdate_search_calend.png)
---

#### Поиск по упражнениям
Компоненты интерфейса для поиска записей по упражнениям:
self.search_exercises_label = ttk.Label(records_window, text='Поиск по упражнениям:')
self.search_exercises_entry = ttk.Entry(records_window)
search_exercises_btn = ttk.Button(records_window, text='Поиск по упражнениям',
                                  command=lambda: exercises_search(self.tree, self.search_exercises_entry.get(), load_data()))

- Поиск по упражнениям: используется поле ввода (Entry), куда пользователь вводит название упражнения. Кнопка вызывает 
функцию exercises_search.
![exercises_search.png](images%2Fexercises_search.png)
---

#### Редактирование, удаление записей и статистика
Главные кнопки для работы с записями:
edit_entry_btn = ttk.Button(records_window, text='Редактировать запись', command=lambda: edit_entry(self.tree))
delete_entry_btn = ttk.Button(records_window, text='Удалить запись', command=lambda: delete_record(self.tree))
statistics_btn = ttk.Button(records_window, text='Статистика', command=lambda: show_statistics(self.tree))

- Редактировать запись: открывает отдельное окно для изменения данных выделенной строки (используется метод edit_entry).
![red_del.png](images%2Fred_del.png)![edit_entry.png](images%2Fedit_entry.png)
- Удалить запись: удаляет выбранную запись (функция delete_record).
![delete_record.png](images%2Fdelete_record.png)
- Статистика: отображает обработанную статистику тренировок.
![stat.png](images%2Fstat.png)
---

#### Визуализация прогресса
visualization_btn = ttk.Button(records_window, text='Визуализация прогресса',
                                command=lambda: show_progress(self.tree))

- Кнопка запускает метод визуализации прогресса тренировок (например, графики с использованием matplotlib).
![show_progress.png](images%2Fshow_progress.png)
---

#### Таблица с данными — Treeview
self.tree = ttk.Treeview(records_window, columns=("Дата", "Упражнение", "Вес", "Повторения"), show="headings")
self.tree.heading('Дата', text="Дата")
self.tree.heading('Упражнение', text="Упражнение")
self.tree.heading('Вес', text="Вес")
self.tree.heading('Повторения', text="Повторения")
self.tree.grid(row=4, column=0, columnspan=4)

- Таблица (Treeview) отображает записи с четырьмя столбцами: Дата, Упражнение, Вес, Повторения.
- Метод self.tree.insert добавляет данные в таблицу.
![treeview.png](images%2Ftreeview.png)


---
## ▎Зависимости

- tkinter — библиотека для создания графического интерфейса.
- tkcalendar — виджет выбора даты.
- datetime — работа с датой и временем.
- json — хранение записей в файле JSON.

---
## В модуле function:
### Начальные настройки
- Импортируются tkinter, ttk, Toplevel для создания интерфейса и виджетов программы, messagebox для выведения 
информационных окон
- DateEntry для работы с сременем
- csv для работы с форматом CSV
- asksaveasfilename, asksaveasfilename для экспорта и импорта файлов через проводник системы компьютера
- matplotlib.pyplot для создания графиков
- defaultdict в данном случае для создания нулевых значений по запросу в поиске на несущетсвующую в списке дату


### date_search(tree, search_date, data)
Фильтрация записей по указанной дате.

Аргументы:
- tree — виджет Treeview, где отображаются записи.
- search_date — дата (строка), по которой нужно искать записи.
- data — список словарей с данными (журнал тренировок).

Описание:
Функция очищает виджет Treeview и отображает только те записи, которые начинаются с указанной даты. Если записей 
не найдено, отображается всплывающее сообщение.

---

### exercises_search(tree, search_exercises, data)
Фильтрация записей по названию упражнения.

Аргументы:
- tree — виджет Treeview, где отображаются записи.
- search_exercises — название упражнения, по которому нужно искать записи.
- data — список словарей с данными (журнал тренировок).

Описание:
Функция очищает виджет Treeview и отображает записи, которые соответствуют указанному упражнению. Если совпадений 
не найдено, отображается всплывающее сообщение.

---

### export_to_csv(tree)
Экспорт данных из Treeview в CSV-файл.

Аргументы:
- tree — список записей, который нужно сохранить.

Описание:
- Открывается диалоговое окно для выбора пути сохранения.
- Данные из Treeview экспортируются в файл CSV.
- По завершении отображается сообщение об успешной операции.

---

### import_from_csv(tree)
Импорт данных из CSV-файла в журнал тренировок.

Аргументы:
- tree — дерево, куда будут добавлены записи.

Описание:
- Открывается диалоговое окно для выбора файла CSV.
- Считываются данные из файла, приводятся к нужному формату и добавляются в список записей.
- Данные сохраняются в программе, а после успешного импорта выводится уведомление.

---

### edit_entry(tree)
Редактирование выбранной записи в Treeview.

Аргументы:
- tree — виджет Treeview, содержащий исходные данные.

Описание:
- Открывается новое окно для изменения значений выделенной строки.
- Поля ввода предварительно заполняются текущими значениями упражнения, веса, повторений и даты.
- Пользователь может обновить значения и сохранить изменения. После этого строка в Treeview обновляется.
---
### ▎delete_record(tree)
Описание:  
Удаляет одну или несколько выбранных записей из виджета Treeview.

Параметры:
- tree — объект Treeview, из которого нужно удалить записи.

Поведение:
1. Если в Treeview ничего не выбрано, отображается предупреждающее сообщение.
2. Перед удалением запрашивается подтверждение через диалоговое окно.
3. Удаляет выбранные записи.
4. После успешного удаления отображается информационное сообщение.

Используемые библиотеки:
- tk.messagebox — для отображения диалоговых окон подтверждения, предупреждений и уведомлений.

---

### ▎show_statistics(tree)
Описание:  
Считает статистику по суммарному весу упражнений за каждый месяц, основываясь на данных из виджета Treeview, и отображает эту статистику в диалоговом окне.

Параметры:
- tree — объект Treeview, из которого извлекаются данные для анализа.

Поведение:
1. Извлекает данные из Treeview, где предполагается следующий формат:
   - Столбец 0: Дата в формате YYYY-MM-DD HH:MM:SS.
   - Столбец 1: Название упражнения.
   - Столбец 2: Вес (число).
   - Столбец 3: Повторения (число).
2. Группирует данные по месяцу и упражнению.
3. Рассчитывает суммарный вес для каждого упражнения: вес * повторения.
4. Выводит статистику в виде строки в диалоговом окне.

Примечания:
- Ошибки в обработке дат или данных записываются в консоль для отладки.

Используемые библиотеки:
- defaultdict (из collections) — для удобной группировки данных.
- datetime.datetime — для работы с датами.
- tk.messagebox — для отображения результата статистики.

---

### ▎show_progress(tree)
Описание:  
Строит графики изменения веса и количества повторений для каждого упражнения.

Параметры:
- tree — объект Treeview, из которого извлекаются данные для построения графиков.

Поведение:
1. Извлекает данные из Treeview, учитывая следующий формат:
   - Столбец 0: Дата в формате YYYY-MM-DD HH:MM:SS.
   - Столбец 1: Название упражнения.
   - Столбец 2: Вес (число с плавающей точкой).
   - Столбец 3: Повторения (число).
2. Группирует данные по каждому упражнению, формируя:
   - Список дат выполнения.
   - Соответствующий список весов.
   - Список количества повторений.
3. Для каждого упражнения строит два графика:
   - Изменение веса со временем.
   - Изменение количества повторений со временем.
4. Графики отображаются при помощи matplotlib.

---

## ▎Формат данных

Все записи хранятся в формате списка словарей. Каждая запись имеет следующую структуру:
{
    'exercise': str,  # Название упражнения
    'weight': float,  # Вес снаряда
    'reps': int,      # Количество повторений
    'date': str       # Дата выполнения
}


---

## ▎Графический интерфейс

Весь интерфейс построен с использованием библиотеки Tkinter. Основные элементы:
- Treeview — таблица для отображения данных.
- Toplevel — дополнительное окно для редактирования данных.
- Messagebox — всплывающие окна для отображения сообщений (ошибки, успех).

---

## ▎Зависимости

Для успешной работы скрипта необходимы следующие модули:
- tkinter и ttk (графический интерфейс).
- csv (работа с CSV-файлами).
- datetime (обработка дат).
- matplotlib.pyplot (опционально, для возможной визуализации данных в будущем).
- collections.defaultdict (организация данных).

---

## ▎Пример использования

Основной процесс работы:
1. Пользователь запускает приложение, где отображаются поля для ввода данных о тренировке.
![window root.png](images%2Fwindow%20root.png)

### Добавление записи
1. Введите данные о тренировке (дата, упражнение, вес, повторения).
2. Нажмите кнопку для добавления записи в журнал.

### Поиск по дате
1. Укажите дату (например, "2023-10-01").
2. Нажмите кнопку поиска, чтобы отфильтровать записи.

![date_search.png](images%2Fdate_search.png)
![date_search_calend.png](images%2Fdate_search_calend.png)
### Поиск по упражнению
1. Укажите название упражнения (например, "Жим лежа").
2. Нажмите кнопку поиска, чтобы отобразить записи с этим упражнением.

![exercises_search.png](images%2Fexercises_search.png)
### Редактирование записи
1. Выберите запись в Treeview.
2. Нажмите "Редактировать".

![red_del.png](images%2Fred_del.png)
3. В открывшемся окне измените данные и нажмите "Сохранить".

![edit_entry.png](images%2Fedit_entry.png)
---

## ▎Потенциальные улучшения
1. Обработка ошибок: добавить проверку входных данных для полей ввода.
2. Оптимизация интерфейса: улучшить адаптивность окна с записями.
3. Улучшение импорта/экспорта: реализовать автоматическое определение формата данных.
4. Улучшить интерфейс (например, использовать сторонние GUI-фреймворки: PyQT или Kivy). 
5. Улучшить обработку ошибок (например, защита от попытки экспортировать пустую таблицу).
6. Динамика работы: сохранить данные тренировок в локальной базе данных или облаке для доступа с разных устройств.

---